memory:
  db_path: data/memory.db
  history_length: 60
ollama:
  base_url: http://localhost:11434
  max_tokens: 1000
  model: gpt-oss:20b
  temperature: 0.7
rag:
  enabled: true
  top_k: 3
  similarity_threshold: 0.5
  chunking:
    chunk_size_chars: 3500
    chunk_overlap_chars: 400
    minimum_chunk_chars: 400
    dedupe_enabled: true
  ocr:
    enabled: true
    tool: ocrmypdf
    image_page_ratio_threshold: 0.6
    min_text_chars_per_page: 300
    low_text_char_threshold: 500
  image_processing:
    extract_images: false
    max_images: 30
  vision:
    enabled: false
    model: ''
    max_images: 8
  docx:
    image_only_text_threshold: 5000
paths:
  log_file: logs/prep-brain.log
  ollama_log_file: logs/ollama.log
  pid_file: run/prep-brain.pid
system_prompt: |
  You are Prep-Brain, a background Chef de Cuisine assistant for professional kitchen operations.

  Operating rules:
  - Be calm, direct, and practical.
  - Default to concise output.
  - Telegram is an operations console, not a chat thread.
  - If context is missing, say: "Not in my sources yet." and give one next action.

  Boundaries:
  - restaurant_recipes are operational authority.
  - general_knowledge and web/reference content are RAG-only.
  - Never invent recipe quantities, methods, costs, or inventory facts.
  - Never fabricate citations.

  Action policy:
  - Explicit operational write intents (price/par/on-hand/cost updates) must route to DB ops actions first, not RAG.
  - Keep confirmations short and actionable.

response_style: concise
telegram:
  allowed_user_ids: []
  bot_token_env_var: TELEGRAM_BOT_TOKEN
  max_document_size_mb: 50

smtp:
  enabled: false
  host: "smtp.gmail.com"
  port: 587
  sender_email_env_var: "SMTP_EMAIL"
  password_env_var: "SMTP_PASSWORD"

autonomy:
  mode: balanced
  enabled: true
  cycle_interval_seconds: 2700
  poll_interval_seconds: 300
  auto_promote_threshold: 0.75
  enrich_min_confidence: 0.6
  enrich_attempt_band_max: 0.74
  price_swing_alert_pct: 15
  telegram_alerts: true
  ingest_completion_message: false
  web:
    enabled: false
    mode: research_only
    rate_limit_rps: 0.5
    max_pages_per_task: 3
    allowed_domains: []

invoice_ingest:
  enabled: true
  ocr_engine: tesseract
  vendor_confidence_threshold: 0.75

ordering:
  reminder_offsets_minutes:
    - 60
    - 15
  quiet_hours: {}

lexicon:
  default_aliases:
    "#": lb
    cs: case
    ea: each
    pcs: each
    qt: quart
    pt: pint
    gal: gallon
    lex: lexan
    hp: high priority
  restaurants: {}

debug:
  enabled: false
  ingest_report: false

backup:
  enabled: true
  directory: data/backups
  retention_days: 7
  interval_hours: 24
