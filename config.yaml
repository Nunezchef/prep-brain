memory:
  db_path: data/memory.db
  history_length: 60
ollama:
  base_url: http://localhost:11434
  max_tokens: 1000
  model: gpt-oss:20b
  temperature: 0.7
rag:
  enabled: true
  top_k: 3
  similarity_threshold: 0.5
  chunking:
    chunk_size_chars: 3500
    chunk_overlap_chars: 400
    minimum_chunk_chars: 400
    dedupe_enabled: true
  ocr:
    enabled: true
    tool: ocrmypdf
    image_page_ratio_threshold: 0.6
    min_text_chars_per_page: 300
    low_text_char_threshold: 500
  image_processing:
    extract_images: false
    max_images: 30
  vision:
    enabled: false
    model: ''
    max_images: 8
  docx:
    image_only_text_threshold: 5000
paths:
  log_file: logs/prep-brain.log
  ollama_log_file: logs/ollama.log
  pid_file: run/prep-brain.pid
system_prompt: |
  You are a local, voice-first AI assistant specialized in kitchen and restaurant operations.

  Your role is to support professional food service environments by helping with:
  - kitchen organization and workflow
  - prep planning and prioritization
  - recipe reasoning and scaling
  - operational problem-solving

  Core Behavior:
  - Be calm, practical, and professional.
  - Assume a working kitchen context.
  - Prioritize clarity, speed, and usefulness.

  Key Instructions:
  1. **Knowledge Retrieval**:
     - When specific restaurant recipes, prep lists, or operational data is requested and no matching context is found in the local knowledge base, say explicitly: "I don't have that specific information in the knowledge base."
     - For general culinary technique questions (not restaurant-specific), you may use general knowledge but must clearly label it: "From general culinary knowledge (not from your restaurant's records):"
     - If asked to browse the web, say: "I can't browse the web right now."
     - Never invent recipe ratios, quantities, or procedures for restaurant-specific dishes.

  2. **Voice & Clarity**:
     - If a proper noun (name, place, dish) sounds ambiguous or potentially misheard (e.g., "Eckert" vs "Achatz"), ALWAYS ask: "Did you mean [Name]?" before proceeding.
     - Do not assume names unless context is strict.

  3. **Memory**:
     - Use stored memory for context, but do not rely on it as the only source of truth.

  Output style:
  - Default to concise, structured answers.
  - Use bullets, tables, or steps when helpful.
telegram:
  allowed_user_ids: []
  bot_token_env_var: TELEGRAM_BOT_TOKEN
  max_document_size_mb: 50

smtp:
  enabled: false
  host: "smtp.gmail.com"
  port: 587
  sender_email_env_var: "SMTP_EMAIL"
  password_env_var: "SMTP_PASSWORD"

autonomy:
  mode: balanced
  enabled: true
  cycle_interval_seconds: 2700
  poll_interval_seconds: 300
  auto_promote_threshold: 0.75
  enrich_min_confidence: 0.6
  enrich_attempt_band_max: 0.74
  price_swing_alert_pct: 15
  telegram_alerts: true
  ingest_completion_message: false
  web:
    enabled: false
    mode: research_only
    rate_limit_rps: 0.5
    max_pages_per_task: 3
    allowed_domains: []

invoice_ingest:
  enabled: true
  ocr_engine: tesseract
  vendor_confidence_threshold: 0.75

ordering:
  reminder_offsets_minutes:
    - 60
    - 15
  quiet_hours: {}

lexicon:
  default_aliases:
    "#": lb
    cs: case
    ea: each
    pcs: each
    qt: quart
    pt: pint
    gal: gallon
    lex: lexan
    hp: high priority
  restaurants: {}

debug:
  enabled: false
  ingest_report: false
